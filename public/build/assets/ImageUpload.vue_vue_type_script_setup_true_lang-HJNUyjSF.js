import{d as N,z as g,c as h,l as B,a as s,o as r,k as n,b as t,i as R,t as u,j as T,e as k,u as x,D as j}from"./app-BQOcnhDW.js";import{R as P}from"./rotate-ccw-BRv1OdCf.js";import{X as $}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bo8yG8Zh.js";import{U as q}from"./upload-C8QfBqXN.js";const A={class:"space-y-3"},W={key:0,class:"space-y-1"},G=["for"],Y={key:0,class:"text-red-500 ml-1"},J={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},K=["id","accept","disabled"],X={key:0,class:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-800/80 rounded-lg"},H={key:1,class:"absolute inset-0 p-4"},Q={class:"relative h-full w-full rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700"},Z=["src","alt"],ee={class:"absolute inset-0 bg-black/0 hover:bg-black/20 transition-colors duration-200 flex items-center justify-center opacity-0 hover:opacity-100"},te={class:"flex gap-2"},ae={key:0,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3"},se={class:"text-white text-xs"},re={class:"font-medium truncate"},le={class:"text-white/80"},oe={key:1,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3"},ie={class:"text-white text-xs"},de={class:"text-white/80 truncate"},ne={key:2,class:"flex flex-col items-center justify-center h-full p-6 text-center"},ue={class:"mb-4"},ce={class:"space-y-2"},be={class:"text-base font-medium text-gray-700 dark:text-gray-300"},ve={class:"text-xs text-gray-500 dark:text-gray-400"},me={key:0,class:"mt-2"},pe={key:1,class:"space-y-1"},ge={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},fe={key:0,class:"text-red-500 ml-1"},ye=["value"],he={key:0,class:"text-sm text-red-600 dark:text-red-400"},ke={key:2,class:"text-sm text-red-600 dark:text-red-400"},ze=N({__name:"ImageUpload",props:{id:{},modelValue:{},altText:{},label:{},description:{},error:{},altError:{},required:{type:Boolean},disabled:{type:Boolean},accept:{default:"image/jpeg,image/png,image/jpg,image/webp"},maxSize:{default:5},showPreview:{type:Boolean,default:!0},showAltText:{type:Boolean,default:!0},placeholder:{default:"Resim seçin veya sürükleyip bırakın"}},emits:["update:modelValue","update:altText"],setup(S,{emit:U}){const d=S,_=U,b=g(!1),v=g(!1),m=g(),o=g(null),l=g(),w=h(()=>d.id||`image-url-upload-${Math.random().toString(36).substr(2,9)}`),y=h(()=>{if(!o.value)return null;const e=(o.value.size/(1024*1024)).toFixed(2);return{name:o.value.name,size:`${e} MB`,type:o.value.type}}),C=h(()=>{let e="relative w-full min-h-[200px] rounded-lg border-2 border-dashed transition-all duration-200 cursor-pointer";return d.disabled?e+=" border-gray-200 bg-gray-50 cursor-not-allowed dark:border-gray-700 dark:bg-gray-800":b.value?e+=" border-blue-400 bg-blue-50 dark:border-blue-500 dark:bg-blue-900/20":d.error?e+=" border-red-300 bg-red-50 hover:border-red-400 dark:border-red-600 dark:bg-red-900/20":e+=" border-gray-300 bg-gray-50 hover:border-gray-400 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:hover:border-gray-500 dark:hover:bg-gray-700",e}),I=e=>window.URL.createObjectURL(e),f=e=>{window.URL.revokeObjectURL(e)},D=e=>{const a=d.maxSize*1024*1024;return e.size>a?`Dosya boyutu ${d.maxSize}MB'dan büyük olamaz`:e.type.startsWith("image/")?null:"Sadece resim dosyaları kabul edilir"},z=e=>{e&&e.type.startsWith("image/")&&(l.value&&f(l.value),l.value=I(e))},L=e=>{var c;const a=e.target,i=(c=a.files)==null?void 0:c[0];if(i){const p=D(i);if(p){alert(p),a.value="";return}v.value=!0,o.value=i,z(i),setTimeout(()=>{_("update:modelValue",i),v.value=!1},300)}},F=e=>{var i;if(e.preventDefault(),b.value=!1,d.disabled)return;const a=(i=e.dataTransfer)==null?void 0:i.files;if(a&&a.length>0){const c=a[0],p=D(c);if(p){alert(p);return}v.value=!0,o.value=c,z(c),setTimeout(()=>{_("update:modelValue",c),v.value=!1},300)}},M=e=>{e.preventDefault(),d.disabled||(b.value=!0)},O=()=>{b.value=!1},E=()=>{o.value=null,l.value&&(f(l.value),l.value=void 0),m.value&&(m.value.value="")},V=()=>{!d.disabled&&m.value&&m.value.click()};return B(()=>d.modelValue,e=>{e||(o.value=null,l.value&&(f(l.value),l.value=void 0))},{immediate:!0}),B(()=>o.value,(e,a)=>{a&&l.value&&f(l.value)}),(e,a)=>(r(),s("div",A,[e.label?(r(),s("div",W,[t("label",{for:w.value,class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[R(u(e.label)+" ",1),e.required?(r(),s("span",Y,"*")):n("",!0)],8,G),e.description?(r(),s("p",J,u(e.description),1)):n("",!0)])):n("",!0),t("div",{class:j(C.value),onDrop:F,onDragover:M,onDragleave:O,onClick:V},[t("input",{ref_key:"fileInputRef",ref:m,id:w.value,type:"file",accept:e.accept,disabled:e.disabled,class:"hidden",onChange:L},null,40,K),v.value?(r(),s("div",X,a[1]||(a[1]=[t("div",{class:"flex flex-col items-center gap-2"},[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Yükleniyor...")],-1)]))):e.modelValue||o.value&&l.value?(r(),s("div",H,[t("div",Q,[t("img",{src:e.modelValue||l.value,alt:e.altText||"Önizleme",class:"h-full w-full object-cover"},null,8,Z),t("div",ee,[t("div",te,[t("button",{type:"button",onClick:T(V,["stop"]),class:"p-2 bg-white/90 hover:bg-white text-gray-700 rounded-full transition-colors",title:"Değiştir"},[k(x(P),{class:"h-4 w-4"})]),t("button",{type:"button",onClick:T(E,["stop"]),class:"p-2 bg-red-500/90 hover:bg-red-500 text-white rounded-full transition-colors",title:"Kaldır"},[k(x($),{class:"h-4 w-4"})])])]),y.value?(r(),s("div",ae,[t("div",se,[t("p",re,u(y.value.name),1),t("p",le,u(y.value.size),1)])])):e.modelValue?(r(),s("div",oe,[t("div",ie,[a[2]||(a[2]=t("p",{class:"font-medium"},"Yüklenmiş Resim",-1)),t("p",de,u(e.modelValue),1)])])):n("",!0)])])):(r(),s("div",ne,[t("div",ue,[k(x(q),{class:j(["h-12 w-12",b.value?"text-blue-500":e.error?"text-red-400":"text-gray-400"])},null,8,["class"])]),t("div",ce,[t("p",be,u(e.placeholder),1),t("p",ve," JPG, PNG, WEBP • Max "+u(e.maxSize)+"MB ",1)]),b.value?(r(),s("div",me,a[3]||(a[3]=[t("p",{class:"text-sm text-blue-600 dark:text-blue-400 font-medium"}," Dosyayı bırakın ",-1)]))):n("",!0)]))],34),e.showAltText&&(e.modelValue||o.value)?(r(),s("div",pe,[t("label",ge,[a[4]||(a[4]=R(" Alt Text ")),e.required?(r(),s("span",fe,"*")):n("",!0)]),t("input",{value:e.altText,onInput:a[0]||(a[0]=i=>e.$emit("update:altText",i.target.value)),type:"text",placeholder:"Resim açıklaması (SEO için önemli)",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},null,40,ye),e.altError?(r(),s("p",he,u(e.altError),1)):n("",!0)])):n("",!0),e.error?(r(),s("p",ke,u(e.error),1)):n("",!0)]))}});export{ze as _};
